# NeON Build File (http://github.com/c4s4/neon)

doc: Parent build file for projects with semantic changelog
extends:
- c4s4/build/git.yml

properties:
  CHANGELOG_FILE: 'CHANGELOG.yml'

targets:

  version:
    doc: Extract release version from changelog if exists, else prompt
    steps:
    - 'VERSION = changelog(CHANGELOG_FILE)[0].Version'
    - print: 'Release version: ={VERSION}'

  release-check:
    doc: Perform release checks
    steps:
    - if: 'changelog(CHANGELOG_FILE)[0].Date != now()[0:10]'
      then:
      - throw: 'Bad release date in changelog'
    - super:

  changelog:
    doc: Print changelog for current release in markdown fomat
    steps:
    - $: ['changelog', 'release', 'to', 'markdown']
