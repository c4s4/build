# NeON Build File (http://github.com/c4s4/neon)

doc: Build file for Github projects

properties:
  GITHUB_USER:  'user-name'
  GITHUB_REPO:  'project-repository'
  GITHUB_TOKEN: 'github-token'
  GITHUB_TITLE: 'release-title'
  GITHUB_DESC:  'release-description'
  # GITHUB_ARC:   'release-archive'
  # VERSION:      'release-version'
  # GOTOOLS:      ['github.com/itchio/gothub']

targets:

  github-release:
    doc: Create Github release and upload archive
    steps:
    - 'args = ["--security-token", GITHUB_TOKEN, "--user", GITHUB_USER, "--repo", GITHUB_REPO, "--tag", VERSION]'
    - print: 'Creating release on Github...'
    - $: ['gothub', 'release', '--name', =GITHUB_TITLE, '--description', =GITHUB_DESC]
      +: args
    - if: 'defined("GITHUB_ARC")'
      then:
      - print: 'Uploading archive on Github...'
      - $: ['gothub', 'upload', '--name', '={filename(GITHUB_ARC)}', '--file', =GITHUB_ARC]
        +: args
